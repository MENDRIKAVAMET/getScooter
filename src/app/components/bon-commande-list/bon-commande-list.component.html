<!-- Formulaire en haut -->
<div class="component-container">
  <div class="form-wrapper transition" [class.open]="showForm">
    <app-bon-commande-form [bonCommande]="selectedBon" (saved)="onSaved()"></app-bon-commande-form>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
    <h2 class="mb-0" style="color: white;">
      Liste des commandes
    </h2>

    <button class="btn btn-success" (click)="toggleForm()">
      <i class="fas fa-plus-circle me-1"></i> {{ showForm ? 'Fermer' : 'Ajouter un commande' }}
    </button>
  </div>

  <table class="table table-hover table-bordered shadow-sm">
    <thead class="table-light">
      <tr>
        <th>ID Bon</th>
        <th>ID Client</th>
        <th>Total HT</th>
        <th>TVA</th>
        <th>Total TTC</th>
        <th>Lignes</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bon of commandes">
        <td>{{ bon.id_bon }}</td>
        <td>{{ bon.id_client }}</td>
        <td>{{ bon.total_ht | number: '1.2-2' }} â‚¬</td>
        <td>{{ bon.tva | number: '1.2-2' }} â‚¬</td>
        <td>{{ bon.total_ttc | number: '1.2-2' }} â‚¬</td>
        <td>
          <ul class="list-unstyled mb-0">
            <li *ngFor="let ligne of bon.contenirs">
              {{ ligne.ref_scooter }} &times; {{ ligne.quantite_cmd }} :
              {{ ligne.total_prix | number: '1.2-2' }} â‚¬
              <button class="btn btn-sm btn-outline-danger ms-2" (click)="deleteLigne(bon.id_bon!, ligne.ref_scooter)">
                <i class="fas fa-times"></i>
                ðŸ—‘
              </button>
            </li>
          </ul>
        </td>
        <td>
          <button class="btn btn-sm btn-outline-primary me-2" (click)="editBon(bon)">
            <i class="fas fa-edit"></i>
          </button>
          <button class="btn btn-sm btn-outline-danger" (click)="deleteBon(bon.id_bon!)">
            <i class="fas fa-trash-alt"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>